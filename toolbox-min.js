const{defineProperty:cF}=Object;const{isArray:cG}=Array;(A=>{A.log=console.log;A.error=console.error;A.max=(...B)=>(B.length==1&&cG(B[0]))?Math.max(...B[0]):Math.max(...B);A.min=(...C)=>(C.length==1&&cG(C[0]))?Math.min(...C[0]):Math.min(...C);A.pow=Math.pow;A.floor=Math.floor;A.ceil=Math.ceil;A.round=(n,prec=0)=>Math.round(n*pow(10,prec))/pow(10,prec);A.abs=Math.abs;A.sqrt=Math.sqrt;A.calcSpeedFromDelta=(d,s)=>s*d/1e3;A.calcDistance=(o1,o2)=>{var x=pow(o2.x-o1.x,2),y=pow(o2.y-o1.y,2);return sqrt(x+y)};A.calcAngle=(o1,o2)=>Math.atan2(o2.y-o1.y,o2.x-o1.x);A.collisionX=(_a,_b)=>{if(cG(_b))return _b.some(D=>collisionX(_a,D));return(!(_a.x>_b.x+_b.w||_a.x+_a.w<_b.x))};A.collisionY=(_A,_B)=>{if(cG(_B))return _B.some(E=>collisionY(_A,E));return(!(_A.y>_B.y+_B.h||_A.y+_A.h<_B.y))};A.collision=(aA,aB)=>{if(cG(aB))return aB.some(o=>collision(aA,o));return collisionX(aA,aB)&&collisionY(aA,aB)};A.constrain=(n,min,max)=>n<min?min:n>max?max:n;A.trackKeys=(aC,k)=>{var d={},h=(e,aD)=>{k.includes(e.code)&&(d[e.code]=aD,e.preventDefault())};aC.onkeydown=e=>h(e,!0);aC.onkeyup=e=>h(e,!1);return d};A.rangeArray=aE=>{if(!cG(aE))throw 'rangeArray() only accept arrays';else return[min(aE),max(aE)]};A.range=n=>this.generateArray(n).map((_,i)=>i);A.random=(aF,aG)=>{if(cG(aF)&&aG==void 0)return aF[random(aF.length)];if(aF==void 0){aF=0;aG=2}else aG==void 0&&(aG=aF,aF=0);return floor(randomFloat(aF,aG))};A.randomFloat=(aH,aI)=>{if(aH==void 0){aH=0;aI=1}else aI==void 0&&(aI=aH,aH=0);return aH+Math.random()*(aI-aH)};A.randomNormal=(aJ=0,aK=1)=>{let s,u,v;do{u=v=randomFloat(-1,1);s=pow(u,2)+pow(v,2)}while (s>=1)var f=u*sqrt(-2*Math.log(s)/s);return aK*f+aJ};A.removeFromArray=(t,o)=>{var i=t.indexOf(o);i!==-1&&t.splice(i,1);return t};A.generateArray=(...aL)=>{if(aL.length<=1)return Array(aL[0]).fill(0);return Array(aL.shift()).fill(0).reduce(t=>(t.push(generateArray(...aL)),t),[])};A.delay=aM=>new Promise((aN,aO)=>{aM<1?aO('Time can\'t be less then 1 ms'):setTimeout(aN,aM)});A.map=(v,f1,f2,l1,l2)=>l1+(l2-l1)*((v-f1)/(f2-f1));A.loadImage=(o,s)=>{var i=new Image();if(s){if(typeof s!='string')throw 'Loading image only support links';i.src=s;i.onload=_=>o.img=i}else{if(typeof o!='string')throw 'Loading image only support links';i.src=o}i.onerror=error;return i};A.isImage=l=>/\.(tif|jpeg|jpg|gif|png)$/.test(l.trim().toLowerCase());A.loadAudio=(s,aP={})=>{if(typeof o!='string')throw 'Loading audio only support links';var a=new Audio();a.src=s;a.autoplay=aP.autoplay||!1;a.loop=aP.loop||!1;a.volume=aP.volume||1.0;a.stop=function(){this.pause();this.currentTime=0};return a};A.isAudio=l=>/\.(mp3|ogg|wav|flac|wma|aac)$/.test(l.trim().toLowerCase());A.getCurrentDateTime=_=>{var c=new Date();var n=n=>(n<10?'0':'')+n,d=n(c.getDate()),m=n(c.getMonth()+1),y=c.getFullYear(),t=c.toTimeString().substring(0,8);return`${y}-${m}-${d} ${t}`};A.sha256=async aQ=>_('SHA-256',aQ);A.sha384=async aR=>_('SHA-384',aR);A.sha512=async aS=>_('SHA-512',aS);async function _(aT,aU){var _C=await crypto.subtle.digest(aT,new TextEncoder('utf-8').encode(aU));const _d=[...new Uint8Array(_C)];return _d.map(b=>('00'+b.toString(16)).slice(-2)).join('')}A.MD5=s=>{function aV(x,k){let[a,b,c,d]=x;a=_D(a,b,c,d,k[0],7,-680876936);d=_D(d,a,b,c,k[1],12,-389564586);c=_D(c,d,a,b,k[2],17,606105819);b=_D(b,c,d,a,k[3],22,-1044525330);a=_D(a,b,c,d,k[4],7,-176418897);d=_D(d,a,b,c,k[5],12,1200080426);c=_D(c,d,a,b,k[6],17,-1473231341);b=_D(b,c,d,a,k[7],22,-45705983);a=_D(a,b,c,d,k[8],7,1770035416);d=_D(d,a,b,c,k[9],12,-1958414417);c=_D(c,d,a,b,k[10],17,-42063);b=_D(b,c,d,a,k[11],22,-1990404162);a=_D(a,b,c,d,k[12],7,1804603682);d=_D(d,a,b,c,k[13],12,-40341101);c=_D(c,d,a,b,k[14],17,-1502002290);b=_D(b,c,d,a,k[15],22,1236535329);a=_e(a,b,c,d,k[1],5,-165796510);d=_e(d,a,b,c,k[6],9,-1069501632);c=_e(c,d,a,b,k[11],14,643717713);b=_e(b,c,d,a,k[0],20,-373897302);a=_e(a,b,c,d,k[5],5,-701558691);d=_e(d,a,b,c,k[10],9,38016083);c=_e(c,d,a,b,k[15],14,-660478335);b=_e(b,c,d,a,k[4],20,-405537848);a=_e(a,b,c,d,k[9],5,568446438);d=_e(d,a,b,c,k[14],9,-1019803690);c=_e(c,d,a,b,k[3],14,-187363961);b=_e(b,c,d,a,k[8],20,1163531501);a=_e(a,b,c,d,k[13],5,-1444681467);d=_e(d,a,b,c,k[2],9,-51403784);c=_e(c,d,a,b,k[7],14,1735328473);b=_e(b,c,d,a,k[12],20,-1926607734);a=F(a,b,c,d,k[5],4,-378558);d=F(d,a,b,c,k[8],11,-2022574463);c=F(c,d,a,b,k[11],16,1839030562);b=F(b,c,d,a,k[14],23,-35309556);a=F(a,b,c,d,k[1],4,-1530992060);d=F(d,a,b,c,k[4],11,1272893353);c=F(c,d,a,b,k[7],16,-155497632);b=F(b,c,d,a,k[10],23,-1094730640);a=F(a,b,c,d,k[13],4,681279174);d=F(d,a,b,c,k[0],11,-358537222);c=F(c,d,a,b,k[3],16,-722521979);b=F(b,c,d,a,k[6],23,76029189);a=F(a,b,c,d,k[9],4,-640364487);d=F(d,a,b,c,k[12],11,-421815835);c=F(c,d,a,b,k[15],16,530742520);b=F(b,c,d,a,k[2],23,-995338651);a=g(a,b,c,d,k[0],6,-198630844);d=g(d,a,b,c,k[7],10,1126891415);c=g(c,d,a,b,k[14],15,-1416354905);b=g(b,c,d,a,k[5],21,-57434055);a=g(a,b,c,d,k[12],6,1700485571);d=g(d,a,b,c,k[3],10,-1894986606);c=g(c,d,a,b,k[10],15,-1051523);b=g(b,c,d,a,k[1],21,-2054922799);a=g(a,b,c,d,k[8],6,1873313359);d=g(d,a,b,c,k[15],10,-30611744);c=g(c,d,a,b,k[6],15,-1560198380);b=g(b,c,d,a,k[13],21,1309151649);a=g(a,b,c,d,k[4],6,-145523070);d=g(d,a,b,c,k[11],10,-1120210379);c=g(c,d,a,b,k[2],15,718787259);b=g(b,c,d,a,k[9],21,-343485551);x[0]=L(a,x[0]);x[1]=L(b,x[1]);x[2]=L(c,x[2]);x[3]=L(d,x[3])}function aW(q,a,b,x,s,t){a=L(L(a,q),L(x,t));return L((a<<s)|(a>>>(32-s)),b)}function _D(a,b,c,d,x,s,t){return aW((b&c)|((~b)&d),a,b,x,s,t)}function _e(a,b,c,d,x,s,t){return aW((b&d)|(c&(~d)),a,b,x,s,t)}function F(a,b,c,d,x,s,t){return aW(b^c^d,a,b,x,s,t)}function g(a,b,c,d,x,s,t){return aW(c^(b|(~d)),a,b,x,s,t)}function H(s){let n=s.length,aX=[1732584193,-271733879,-1732584194,271733878],i;for(i=64;i<=s.length;i+=64)aV(aX,I(s.substring(i-64,i)));s=s.substring(i-64);let _E=generateArray(16);for(i=0;i<s.length;i++)_E[i>>2]|=s.charCodeAt(i)<<((i%4)<<3);_E[i>>2]|=0x80<<((i%4)<<3);i>55&&(aV(aX,_E),_E=generateArray(16));_E[14]=n*8;aV(aX,_E);return aX}function I(s){var aY=[];for(let i=0;i<64;i+=4)aY[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return aY}function J(n){var aZ=['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'];let s='';for(let j=0;j<4;j++)s+=aZ[(n>>(j*8+4))&0x0F]+aZ[(n>>(j*8))&0x0F];return s}function K(x){return x.reduce((s,o)=>s+J(o),'')}function L(x,y){const bA=(x&0xFFFF)+(y&0xFFFF),bB=(x>>16)+(y>>16)+(bA>>16);return (bB<<16)|(bA&0xFFFF)}return K(H(s))};A.ask=bC=>{let bD=bC.link?bC.link+'?':'/?';let bE='text',bF='GET';if(bC.name){bD+=bC.name;bC.value&&(bD+='='+bC.value)}if(bC.responseType)if(['text','arraybuffer','blob','document','json','ms-stream','moz-chunked-arraybuffer'].indexOf(bC.responseType)===-1)throw 'Invalid responseType';else bE=bC.responseType;if(bC.requestType)if(['GET','POST','PUT','DELETE'].indexOf(bC.requestType.toUpperCase())===-1)throw 'Invalid requestType';else bF=bC.requestType;return new Promise((bG,bH)=>{var x=new XMLHttpRequest();x.responseType=bE;x.onreadystatechange=()=>{if(x.readyState===4)x.status===200?bG(x.response):bH('Request failed : '+x.statusText)};x.open(bF,bD,!0);x.send()})};A.$=bI=>{var bJ=document.querySelectorAll(bI);if(bJ.length>0){bJ.css=(property,value)=>{for(const obj of bJ)obj.style[property]=value};bJ.html=value=>{for(const obj of bJ)obj.innerHTML=value};bJ.show=_=>{var bK={address:'block',area:'block',article:'block',aside:'block',blockquote:'block',body:'block',caption:'table-caption',col:'table-column',colgroup:'',datalist:'block',dd:'block',details:'block',div:'block',dl:'block',dt:'block',fieldset:'block',figcaption:'block',figure:'block',footer:'block',form:'block',h1:'block',h2:'block',h3:'block',h4:'block',h5:'block',h6:'block',head:'block',header:'block',hr:'block',html:'block',img:'inline-block',legend:'block',li:'list-item',link:'block',map:'inline',menu:'block',nav:'block',ol:'block',output:'inline',p:'block',param:'block',pre:'block',q:'inline',script:'block',section:'block',style:'block',summary:'block',table:'table',tbody:'table-row-group',td:'table-cell',tfoot:'table-footer-group',th:'table-cell',thead:'table-header-group',title:'block',tr:'table-row',ul:'block'};for(const obj of bJ){var bL=obj.nodeName.toLowerCase();bK.hasOwnProperty(bL)?obj.style.display=bK[bL]:obj.style.display='inline'}};bJ.hide=_=>{for(const obj of bJ)obj.style.display='none'};bJ.click=cb=>{for(const obj of bJ)obj.addEventListener('click',cb)};bJ.attr=(bM,bN)=>bJ[0][bM]=bN;return bJ}return null};A.parseUrl=bO=>{bO=bO.split('%20').join(' ');var bP=bO.split('/');bP.shift();const q=bP[bP.length-1].split('?'),r={dir:bP,params:{length:0}};q.length>1&&(q[1].split('&').forEach(bQ=>{var bR=bQ.split('=');r.params[bR[0]]=bR.length>1?bR[1]:'';r.params.length++}),bP[bP.length-1]=q[0]);return r};A.cleanup=bS=>{process.on('cleanup',bS);process.on('exit',_=>process.emit('cleanup'));process.on('SIGINT',_=>{process.emit('cleanup');process.exit(2)});process.on('uncaughtException',e=>{print('Uncaught Exception...');error(e.stack);process.emit('cleanup');process.exit(99)})};class Rectangle{constructor(x=0,y=0,w=0,h=0,bT='black'){defineControlledProperty(this,'x',x,bU=>{if(isNaN(bU))throw 'x property accept numbers only'});defineControlledProperty(this,'y',y,bV=>{if(isNaN(bV))throw 'y property accept numbers only'});defineControlledProperty(this,'h',h,bW=>{if(isNaN(bW))throw 'h property accept numbers only'});defineControlledProperty(this,'w',w,bX=>{if(isNaN(bX))throw 'w property accept numbers only'});this.c=bT;this.img=void 0}draw(bY){bY.save();bY.translate(this.x,this.y);if(this.img!=void 0)bY.drawImage(this.img,0,0,this.w,this.h);else{bY.fillStyle=this.c;bY.fillRect(0,0,this.w,this.h)}bY.restore()}loadImage(s){if(typeof s!='string')throw 'Loading image only support links';var i=new Image();i.src=s;i.onload=_=>this.img=i;i.onerror=error;return i}}A.Rectangle=Rectangle;A.defineControlledProperty=(o,n,v,bZ)=>{cF(o,n,{get:_=>v,set:nv=>{bZ(nv);v=nv}});o[n]=v};A.arrayEqual=(t1,t2)=>!0&&t1.every((o,i)=>o===t2[i]);A.colorNameToHex=A.colourNameToHex=c=>{var cA={'aliceblue':'#f0f8ff','antiquewhite':'#faebd7','aqua':'#00ffff','aquamarine':'#7fffd4','azure':'#f0ffff','beige':'#f5f5dc','bisque':'#ffe4c4','black':'#000000','blanchedalmond':'#ffebcd','blue':'#0000ff','blueviolet':'#8a2be2','brown':'#a52a2a','burlywood':'#deb887','cadetblue':'#5f9ea0','chartreuse':'#7fff00','chocolate':'#d2691e','coral':'#ff7f50','cornflowerblue':'#6495ed','cornsilk':'#fff8dc','crimson':'#dc143c','cyan':'#00ffff','darkblue':'#00008b','darkcyan':'#008b8b','darkgoldenrod':'#b8860b','darkgray':'#a9a9a9','darkgreen':'#006400','darkkhaki':'#bdb76b','darkmagenta':'#8b008b','darkolivegreen':'#556b2f','darkorange':'#ff8c00','darkorchid':'#9932cc','darkred':'#8b0000','darksalmon':'#e9967a','darkseagreen':'#8fbc8f','darkslateblue':'#483d8b','darkslategray':'#2f4f4f','darkturquoise':'#00ced1','darkviolet':'#9400d3','deeppink':'#ff1493','deepskyblue':'#00bfff','dimgray':'#696969','dodgerblue':'#1e90ff','firebrick':'#b22222','floralwhite':'#fffaf0','forestgreen':'#228b22','fuchsia':'#ff00ff','gainsboro':'#dcdcdc','ghostwhite':'#f8f8ff','gold':'#ffd700','goldenrod':'#daa520','gray':'#808080','green':'#008000','greenyellow':'#adff2f','honeydew':'#f0fff0','hotpink':'#ff69b4','indianred ':'#cd5c5c','indigo':'#4b0082','ivory':'#fffff0','khaki':'#f0e68c','lavender':'#e6e6fa','lavenderblush':'#fff0f5','lawngreen':'#7cfc00','lemonchiffon':'#fffacd','lightblue':'#add8e6','lightcoral':'#f08080','lightcyan':'#e0ffff','lightgoldenrodyellow':'#fafad2','lightgrey':'#d3d3d3','lightgreen':'#90ee90','lightpink':'#ffb6c1','lightsalmon':'#ffa07a','lightseagreen':'#20b2aa','lightskyblue':'#87cefa','lightslategray':'#778899','lightsteelblue':'#b0c4de','lightyellow':'#ffffe0','lime':'#00ff00','limegreen':'#32cd32','linen':'#faf0e6','magenta':'#ff00ff','maroon':'#800000','mediumaquamarine':'#66cdaa','mediumblue':'#0000cd','mediumorchid':'#ba55d3','mediumpurple':'#9370d8','mediumseagreen':'#3cb371','mediumslateblue':'#7b68ee','mediumspringgreen':'#00fa9a','mediumturquoise':'#48d1cc','mediumvioletred':'#c71585','midnightblue':'#191970','mintcream':'#f5fffa','mistyrose':'#ffe4e1','moccasin':'#ffe4b5','navajowhite':'#ffdead','navy':'#000080','oldlace':'#fdf5e6','olive':'#808000','olivedrab':'#6b8e23','orange':'#ffa500','orangered':'#ff4500','orchid':'#da70d6','palegoldenrod':'#eee8aa','palegreen':'#98fb98','paleturquoise':'#afeeee','palevioletred':'#d87093','papayawhip':'#ffefd5','peachpuff':'#ffdab9','peru':'#cd853f','pink':'#ffc0cb','plum':'#dda0dd','powderblue':'#b0e0e6','purple':'#800080','rebeccapurple':'#663399','red':'#ff0000','rosybrown':'#bc8f8f','royalblue':'#4169e1','saddlebrown':'#8b4513','salmon':'#fa8072','sandybrown':'#f4a460','seagreen':'#2e8b57','seashell':'#fff5ee','sienna':'#a0522d','silver':'#c0c0c0','skyblue':'#87ceeb','slateblue':'#6a5acd','slategray':'#708090','snow':'#fffafa','springgreen':'#00ff7f','steelblue':'#4682b4','tan':'#d2b48c','teal':'#008080','thistle':'#d8bfd8','tomato':'#ff6347','turquoise':'#40e0d0','violet':'#ee82ee','wheat':'#f5deb3','white':'#ffffff','whitesmoke':'#f5f5f5','yellow':'#ffff00','yellowgreen':'#9acd32'};if(typeof cA[c.toLowerCase()]!='undefined')return cA[c.toLowerCase()];return!1};A.sum=cB=>{if(!cG(cB))throw 'arr() is only compatible with arrays';else return cB.reduce((t,o)=>t+o,0)};A.mean=cC=>{if(!cG(cC))throw 'mean() is only compatible with arrays';else return sum(cC)/cC.length};A.stddev=cD=>{if(!cG(cD))throw 'stddev() is only compatible with arrays';else{var cE=mean(cD);return this.sum(cD.map(v=>this.pow(v-cE,2)))/cD.length}};A.encodeHTML=str=>str.replace(/[&<>'"]/g,tag=>{'&':'&amp;','<':'&lt;','>':'&gt;','\'':'&#39;','"':'&quot;'}[tag]||tag);A.decodeHTML=str=>str.replace(/&[\d#A-Za-z]{1,4};/g,tag=>{'&amp;':'&','&lt;':'<','&gt;':'>','&#39;':'\'','&quot;':'"'}[tag]||tag)})(typeof exports=='undefined'?typeof window=='undefined'?self:window:exports);
